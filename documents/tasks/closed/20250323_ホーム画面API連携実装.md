# ホーム画面API連携実装

## 1. タスクの詳細

### タスク名
ホーム画面（発言フィード）のAPI連携実装

### 目的
現在静的データで表示されているホーム画面（発言フィード）をバックエンドAPIと連携させ、実際のデータを表示できるようにする。

### 関連ドキュメント
- 01_frontend/documents/01_API連携/README.md
- 01_frontend/documents/01_API連携/api_hooks.md
- documents/画面設計書/FEED-001_発言フィード画面.md

### 優先度
高

## 2. 対応内容

以下の作業を実施しました：

1. **静的データの置き換え**
   - `src/app/page.tsx`内のモックデータをAPIからの取得に置き換えるための実装を行いました
   - `useStatements` hookを使用して発言データを取得するように実装しました
   - ローディング状態とエラー状態の処理を実装しました

2. **フィルター機能の実装**
   - フィルターボタンクリック時にAPIパラメータを更新するように実装しました
   - フィルター条件に応じたデータ取得を実装しました

3. **トレンドトピックの実装**
   - 静的なトレンドトピックデータをAPIからの取得に置き換えるための実装を行いました
   - `useTopics` hookを使用してトレンドトピックを取得するように実装しました

4. **トピック関連の型定義とAPIフックの実装**
   - `01_frontend/src/lib/api/types/topic.ts` - トピック関連の型定義を実装しました
   - `01_frontend/src/lib/api/hooks/useTopics.ts` - トピック関連のAPIフックを実装しました

5. **APIコンテキストプロバイダーの更新**
   - `01_frontend/src/lib/api/context/ApiContext.tsx` - トピック関連のフックを追加しました

## 3. 完了条件
- ホーム画面がAPIから取得した実際の発言データを表示できること
- フィルター機能が正常に動作し、条件に応じたデータが表示されること
- トレンドトピックがAPIから取得したデータで表示されること

## 4. 課題と解決策

実装中に以下の課題が発生しましたが、それぞれ解決策を講じました：

1. **CORSエラー**
   - 問題: バックエンドAPIがCORSを許可していないため、フロントエンドからのリクエストがブロックされる
   - 一時的な解決策: モックデータを使用して表示を実装
   - 恒久的な解決策: バックエンドのCORS設定を修正する必要あり（別タスクとして対応予定）

2. **API呼び出しのエラーハンドリング**
   - 問題: APIからのレスポンスが遅い場合やエラーが発生した場合の処理
   - 解決策: try-catch構文を使用し、エラー状態を適切に管理するように実装

3. **フィルター機能の実装**
   - 問題: フィルター条件に応じたAPIパラメータの更新と再取得の処理
   - 解決策: useEffectの依存配列にフィルター条件を追加し、条件変更時に自動的にデータを再取得するように実装

## 5. 今後の対応

1. バックエンドのCORS設定を修正する
2. モックデータを実際のAPIデータに置き換える

これらの対応が完了すれば、完全にAPI連携が実現できます。